<link rel="import" href="../../polymer/polymer.html"/>
<link rel="import" href="../../iron-flex-layout/iron-flex-layout.html"/>
<link rel="import" href="cubex-breadcrumb-item.html"/>
<link rel="import" href="../cubex-category/cubex-category.html"/>
<link rel="import" href="../cubex-repath/cubex-repath.html">

<dom-module id="cubex-breadcrumb" attributes="crumbs">
  <template>
    <style>
      :host {
        @apply --layout-horizontal;
        padding: 0 24px;
        height: 60px;
        line-height: 60px;
        box-sizing: border-box;
        @apply --cubex-breadcrumb-style;
      }

      :host ::slotted(cube-action) {
        margin: 10px 0 10px 10px;
        padding: 5px;
      }

      #home cube-icon {
        padding: 0;
        margin-top: 21px;
      }

      .stretch {
        @apply --layout-flex-auto;
      }
    </style>

    <cubex-repath in="/" gaid="" out="{{orgPath}}"></cubex-repath>
    <cubex-breadcrumb-item id="home" href="[[orgPath]]">
      <cube-icon icon="icons:home" size="16"></cube-icon>
    </cubex-breadcrumb-item>

    <template is="dom-if" if="[[category]]">
      <cubex-repath in="/[[category]]" gaid="" out="{{catPath}}"></cubex-repath>
      <cubex-breadcrumb-item id="category" href="[[catPath]]">
        <cubex-category key="[[category]]" short></cubex-category>
      </cubex-breadcrumb-item>
    </template>

    <template is="dom-repeat" items="[[crumbs]]">
      <cubex-breadcrumb-item href="[[item.Url]]">[[item.Title]]</cubex-breadcrumb-item>
    </template>

    <div class="stretch"></div>

    <slot name="actions"></slot>
  </template>

  <script>
    Polymer(
      {
        is:         'cubex-breadcrumb',
        properties: {
          crumbs:   {type: Array, value: function () {return [];}},
          category: {type: String}
        }
      }
    );
  </script>
</dom-module>

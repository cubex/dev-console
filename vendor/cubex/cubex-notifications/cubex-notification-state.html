<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-spinner/paper-spinner-lite.html">

<dom-module id="cubex-notification-state" attributes="notification">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
        width: 28px;
        height: 28px;
      }

      :host::before {
        position: absolute;
        top: calc(5px + var(--paper-spinner-stroke-width));
        right: calc(5px + var(--paper-spinner-stroke-width));
        bottom: calc(5px + var(--paper-spinner-stroke-width));
        left: calc(5px + var(--paper-spinner-stroke-width));
        content: '';
        border-radius: 1000px;
      }

      :host([read]:not([running]))::before {
        border: 2px solid var(--primary-700-text-color, #666666);
      }

      :host(:not([read]):not([running]))::before {
        background: var(--primary-700-text-color, #666666);
      }
    </style>

    <paper-spinner-lite active="[[running]]" title="[[notification.message]]"></paper-spinner-lite>
  </template>

  <script>
    Polymer(
      {
        is:         'cubex-notification-state',
        properties: {
          running:      {
            type:               Boolean,
            readOnly:           true,
            reflectToAttribute: true
          },
          unread:       {
            type:               Boolean,
            readOnly:           true,
            reflectToAttribute: true
          },
          read:         {
            type:               Boolean,
            readOnly:           true,
            reflectToAttribute: true
          },
          notification: {
            type:     Object,
            notify:   true,
            observer: '__updateAttributes'
          }
        },

        __updateAttributes: function (notification)
                            {
                              this._setRunning(notification.percentage < 100);
                              this._setUnread(notification.unread);
                              this._setRead(notification.read);
                            }
      }
    );
  </script>
</dom-module>

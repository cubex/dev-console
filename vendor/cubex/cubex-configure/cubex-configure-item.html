<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../cube-behavior/cube-i18n-behavior.html">
<link rel="import" href="../../paper-input/paper-input.html">
<link rel="import" href="../../paper-input/paper-textarea.html">
<link rel="import" href="../../paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../paper-radio-button/paper-radio-button.html">

<dom-module id="cubex-configure-item" attributes="definition value">
  <template>
    <style>
      :host {
        display: block;
      }

      .description {
        @apply --text-secondary;
        font-size: 12px;
      }

      paper-radio-group {
        display: block;
      }
    </style>

    <template is="dom-if" if="[[isString]]">
      <paper-input always-float label="[[i18nResource(definition.Description)]]"
                   placeholder="[[i18nResource(definition.Name)]]" name="[[definition.ID]]" type="text"/>
    </template>

    <template is="dom-if" if="[[isUri]]">
      <paper-input always-float label="[[i18nResource(definition.Description)]]"
                   placeholder="[[i18nResource(definition.Name)]]" name="[[definition.ID]]" type="url"/>
    </template>

    <template is="dom-if" if="[[isBoolean]]">
      <label>[[i18nResource(definition.Name)]]
        <span class="description">[[i18nResource(definition.Description)]]</span>
      </label>
      <paper-radio-group selected="[[definition.Default]]">
        <template is="dom-repeat" items="[[_values]]">
          <paper-radio-button name="[[item.value]]"/>
          [[i18nResource(item.text)]]
        </template>
      </paper-radio-group>
    </template>

  </template>
  <script>
    Polymer(
      {
        is:         'cubex-configure-item',
        properties: {
          definition: {type: Object},
          value:      {type: String},
          _values:    {type: Array, computed: '_computeValues(definition.Values)'},
          isString:   {type: Boolean, computed: '__compare(definition.Type,"string")'},
          isUri:      {type: Boolean, computed: '__compare(definition.Type,"uri")'},
          isBoolean:  {type: Boolean, computed: '__compare(definition.Type,"boolean")'}
        },

        _computeValues: function (values)
                        {
                          var newValues = [];
                          for(var i in values)
                          {
                            if(values.hasOwnProperty(i))
                            {
                              newValues.push({value: i, text: values[i]});
                            }
                          }
                          return newValues;
                        },

        __compare: function (type, compare)
                   {
                     return type === compare;
                   },
        behaviors: [Polymer.CubeI18nBehavior]
      }
    );
  </script>
</dom-module>

<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="./cubex-shell-console.html">
<link rel="import" href="./cubex-shell-signup.html">
<link rel="import" href="../cubex-project/cubex-project.html">

<dom-module id="cubex-shell">
  <template>
    <cubex-project project-id="{{_project}}" projects="{{_projects}}" invites="{{_invites}}"></cubex-project>
    <template is="dom-if" if="[[_showConsole]]">
      <cubex-shell-console></cubex-shell-console>
    </template>
    <template is="dom-if" if="[[_showSignup]]">
      <cubex-shell-signup></cubex-shell-signup>
    </template>
  </template>

  <script>
    Polymer(
      {
        is:                  'cubex-shell',
        properties:          {
          _project:     {type: String},
          _projects:    {type: Array},
          _invites:     {type: Array},
          _showConsole: {type: Boolean, value: false, computed: '_computeShowConsole(_projects,_project,_invites)'},
          _showSignup:  {type: Boolean, value: false, computed: '_computeShowSignup(_projects,_project,_invites)'}
        },
        _computeShowConsole: function (projects, project, invites)
                             {
                               return project || ((projects.length || 0) + (invites.length || 0) > 0);
                             },
        _computeShowSignup:  function (projects, project, invites)
                             {
                               return (!project) && ((projects.length || 0) + (invites.length || 0) <= 0);
                             }
      });
  </script>
</dom-module>
